{"version":3,"file":"component---src-pages-expiry-jsx-22f7d37ad6158d39b871.js","mappings":"0TAAO,IAAMA,EAAgB,gBAChBC,EAAmB,mBACnBC,EAAoB,oBACpBC,EAAiB,iBAEf,SAAS,IACtB,OAAO,IACR,C,sGCFGC,EACgB,oBAAXC,OAAyB,IAAIC,iBAAiB,WAAa,KAErD,SAASC,IACtB,OAA0BC,EAAAA,EAAAA,UAAS,IAA5BC,EAAP,KAAcC,EAAd,KAuDA,OAhBAC,EAAAA,EAAAA,YAAU,WACJN,SACFD,EAAQQ,UAAY,SAACC,GACfA,EAAMC,MAAQD,EAAMC,KAAKC,cAAgBd,EAAAA,iBAC3CG,EAAQY,YAAY,CAClBD,YAAab,EAAAA,kBACbe,KAAM,SACNR,MAAAA,IAEOI,EAAMC,MAAmC,UAA3BD,EAAMC,KAAKC,aAClCL,EAAS,GAEZ,EAEJ,GAAE,CAACD,IAGF,yBACES,KAAK,OACLC,YAAY,qBACZF,KAAK,SACLR,MAAOA,EACPW,SA3DiB,SAACC,GACpB,IAAQZ,EAAUY,EAAOC,OAAjBb,MAEJ,oCAAoCc,KAAKd,KAC3CC,EAASD,IACTe,EAAAA,EAAAA,SAAoB,CAClBC,KAAM,SACNV,YAAa,aACbD,KAAM,CACJY,MAAO,qBAAqBH,KAAKd,MAIxC,EA+CGkB,QA7CgB,YAClBH,EAAAA,EAAAA,SAAoB,CAClBC,KAAM,SACNV,YAAa,QACbD,KAAM,CACJc,UAAW,UACXnB,OAAO,IAGZ,EAqCGoB,OAnCe,YACjBL,EAAAA,EAAAA,SAAoB,CAClBC,KAAM,SACNV,YAAa,QACbD,KAAM,CACJc,UAAW,SACXnB,OAAO,IAGZ,GA6BF,C,uBC3Ec,SAASe,EAAoBM,GAC1C,YADwD,IAAdA,IAAAA,EAAU,CAAC,GAEjC,oBAAXzB,QACPA,OAAO0B,OAAOf,YACZc,EACA,IAAIE,gBAAgBC,SAASC,QAAQC,IAAI,UAG9C,C","sources":["webpack://input-fields/./src/pages/paymentActions.ts","webpack://input-fields/./src/pages/expiry.jsx","webpack://input-fields/./src/pages/postMessageToParent.js"],"sourcesContent":["export const START_PAYMENT = \"start-payment\";\nexport const GET_PAYMENT_DATA = \"GET_PAYMENT_DATA\";\nexport const SEND_PAYMENT_DATA = \"SEND_PAYMENT_DATA\";\nexport const PAYMENT_STATUS = \"payment-status\";\n\nexport default function () {\n  return null;\n}\n","import React, { useState, useEffect } from \"react\";\nimport { GET_PAYMENT_DATA, SEND_PAYMENT_DATA } from \"./paymentActions\";\nimport postMessageToParent from \"./postMessageToParent\";\nimport \"./styles.css\";\n\nlet channel =\n  typeof window !== \"undefined\" ? new BroadcastChannel(\"payment\") : null;\n\nexport default function ExpiryDate() {\n  const [value, setValue] = useState(\"\");\n\n  const handleChange = (change) => {\n    const { value } = change.target;\n\n    if (/^[0-2]{0,2}[-|\\/]{0,1}[0-9]{0,2}$/.test(value)) {\n      setValue(value);\n      postMessageToParent({\n        from: \"expiry\",\n        messageType: \"validation\",\n        data: {\n          valid: /^\\d{2}[-|\\/]\\d{2}$/.test(value),\n        },\n      });\n    }\n  };\n\n  const handleFocus = () => {\n    postMessageToParent({\n      from: \"expiry\",\n      messageType: \"event\",\n      data: {\n        eventName: \"onfocus\",\n        value: true,\n      },\n    });\n  };\n\n  const handleBlur = () => {\n    postMessageToParent({\n      from: \"expiry\",\n      messageType: \"event\",\n      data: {\n        eventName: \"onblur\",\n        value: true,\n      },\n    });\n  };\n\n  useEffect(() => {\n    if (window) {\n      channel.onmessage = (event) => {\n        if (event.data && event.data.messageType === GET_PAYMENT_DATA) {\n          channel.postMessage({\n            messageType: SEND_PAYMENT_DATA,\n            name: \"expiry\",\n            value,\n          });\n        } else if (event.data && event.data.messageType === \"RESET\") {\n          setValue(\"\");\n        }\n      };\n    }\n  }, [value]);\n\n  return (\n    <input\n      type=\"text\"\n      placeholder=\"Valid thru (mm/yy)\"\n      name=\"expiry\"\n      value={value}\n      onChange={handleChange}\n      onFocus={handleFocus}\n      onBlur={handleBlur}\n    />\n  );\n}\n","export default function postMessageToParent(message = {}) {\n  return (\n    typeof window !== \"undefined\" &&\n    window.parent.postMessage(\n      message,\n      new URLSearchParams(location.search).get(\"origin\")\n    )\n  );\n}\n"],"names":["START_PAYMENT","GET_PAYMENT_DATA","SEND_PAYMENT_DATA","PAYMENT_STATUS","channel","window","BroadcastChannel","ExpiryDate","useState","value","setValue","useEffect","onmessage","event","data","messageType","postMessage","name","type","placeholder","onChange","change","target","test","postMessageToParent","from","valid","onFocus","eventName","onBlur","message","parent","URLSearchParams","location","search","get"],"sourceRoot":""}