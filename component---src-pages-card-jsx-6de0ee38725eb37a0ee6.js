"use strict";(self.webpackChunkinput_fields=self.webpackChunkinput_fields||[]).push([[716,221,679],{4197:function(e,a,t){t.r(a),t.d(a,{GET_PAYMENT_DATA:function(){return s},PAYMENT_STATUS:function(){return o},SEND_PAYMENT_DATA:function(){return u},START_PAYMENT:function(){return n},default:function(){return r}});var n="start-payment",s="GET_PAYMENT_DATA",u="SEND_PAYMENT_DATA",o="payment-status";function r(){return null}},2385:function(e,a,t){t.r(a),t.d(a,{default:function(){return r}});var n=t(7294),s=t(6705),u=t(4197),o="undefined"!=typeof window?new BroadcastChannel("payment"):null;function r(){var e=(0,n.useState)(""),a=e[0],t=e[1],r=(0,n.useState)({card:a}),d=r[0],f=r[1],c=(0,n.useState)(null),i=c[0],l=c[1],m=function(e,a){return f((function(t){var n;return Object.assign({},t,((n={})[e]=a,n))}))};return(0,n.useEffect)((function(){window&&(window.onmessage=function(e){e.data.messageType===u.START_PAYMENT&&(l(e.data.data),o.postMessage({messageType:u.GET_PAYMENT_DATA}))},o.onmessage=function(e){e.data.messageType===u.SEND_PAYMENT_DATA&&(console.log("Iframe => Receiving data",e.data),m(e.data.name,e.data.value))})}),[]),(0,n.useEffect)((function(){d.cvv&&d.expiry&&d.card&&(console.log("Iframe => Making charge request",Object.assign({},d,i)),"1111"===d.cvv?(0,s.default)({from:"hosted-frames",messageType:"payment-status",data:{message:"Payment failed",statusCode:300}}):(0,s.default)({from:"hosted-frames",messageType:"payment-status",data:{message:"Payment done",statusCode:200}}))}),[d]),n.createElement("input",{type:"text",name:"card",placeholder:"13 to 19 digits",value:a,onChange:function(e){console.log("Iframe => Card changed");var a=e.target.value;/^[0-9]{0,19}$/.test(a)&&(t(a),m("card",a),(0,s.default)({from:"card",messageType:"validation",data:{valid:/^[0-9]{13,19}$/.test(a)}}))},onFocus:function(){console.log("Iframe => Card focused"),(0,s.default)({from:"card",messageType:"event",data:{eventName:"onfocus",value:!0}})},onBlur:function(){console.log("Iframe => Card blurred"),(0,s.default)({from:"card",messageType:"event",data:{eventName:"onblur",value:!0}})}})}},6705:function(e,a,t){function n(e){return void 0===e&&(e={}),"undefined"!=typeof window&&window.parent.postMessage(e,new URLSearchParams(location.search).get("origin"))}t.r(a),t.d(a,{default:function(){return n}})}}]);
//# sourceMappingURL=component---src-pages-card-jsx-6de0ee38725eb37a0ee6.js.map