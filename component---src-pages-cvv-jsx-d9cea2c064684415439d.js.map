{"version":3,"file":"component---src-pages-cvv-jsx-d9cea2c064684415439d.js","mappings":"6RAAO,IAAMA,EAAgB,gBAChBC,EAAmB,mBACnBC,EAAoB,oBACpBC,EAAiB,iBAE9B,Y,sGCAe,SAASC,IACtB,OAA0BC,EAAAA,EAAAA,UAAS,IAA5BC,EAAP,KAAcC,EAAd,KACMC,GAAUC,EAAAA,EAAAA,QAAO,IAAIC,iBAAiB,YAmD5C,OAZAC,EAAAA,EAAAA,YAAU,WACRH,EAAQI,QAAQC,UAAY,SAACC,GACvBA,EAAMC,MAAQD,EAAMC,KAAKC,cAAgBf,EAAAA,kBAC3CO,EAAQI,QAAQK,YAAY,CAC1BC,OAAQhB,EAAAA,kBACRiB,KAAM,MACNb,MAAAA,GAGL,CACF,GAAE,IAGD,yBACEc,KAAK,OACLC,YAAY,MACZF,KAAK,MACLb,MAAOA,EACPgB,SAvDiB,SAACC,GACpB,IAAQjB,EAAUiB,EAAOC,OAAjBlB,MAEJ,eAAemB,KAAKnB,KACtBC,EAASD,IACToB,EAAAA,EAAAA,SAAoB,CAClBC,KAAM,MACNX,YAAa,aACbD,KAAM,CACJa,MAAO,aAAaH,KAAKnB,MAIhC,EA2CGuB,QAzCgB,YAClBH,EAAAA,EAAAA,SAAoB,CAClBC,KAAM,MACNX,YAAa,QACbD,KAAM,CACJe,UAAW,UACXxB,OAAO,IAGZ,EAiCGyB,OA/Be,YACjBL,EAAAA,EAAAA,SAAoB,CAClBC,KAAM,MACNX,YAAa,QACbD,KAAM,CACJe,UAAW,SACXxB,OAAO,IAGZ,GAyBF,C,uBCrEc,SAASoB,EAAoBM,GAC1C,YADwD,IAAdA,IAAAA,EAAU,CAAC,GAEjC,oBAAXC,QACPA,OAAOC,OAAOjB,YACZkB,KAAKC,UAAUJ,GACf,IAAIK,gBAAgBC,SAASC,QAAQC,IAAI,UAG9C,C","sources":["webpack://input-fields/./src/pages/paymentActions.ts","webpack://input-fields/./src/pages/cvv.jsx","webpack://input-fields/./src/pages/postMessageToParent.js"],"sourcesContent":["export const START_PAYMENT = \"start-payment\";\nexport const GET_PAYMENT_DATA = \"GET_PAYMENT_DATA\";\nexport const SEND_PAYMENT_DATA = \"SEND_PAYMENT_DATA\";\nexport const PAYMENT_STATUS = \"payment-status\";\n\nexport default {};\n","import React, { useState, useRef, useEffect } from \"react\";\nimport postMessageToParent from \"./postMessageToParent\";\nimport { GET_PAYMENT_DATA, SEND_PAYMENT_DATA } from \"./paymentActions\";\nimport \"./styles.css\";\n\nexport default function CVV() {\n  const [value, setValue] = useState(\"\");\n  const channel = useRef(new BroadcastChannel(\"payment\"));\n\n  const handleChange = (change) => {\n    const { value } = change.target;\n\n    if (/^[0-9]{0,4}$/.test(value)) {\n      setValue(value);\n      postMessageToParent({\n        from: \"cvv\",\n        messageType: \"validation\",\n        data: {\n          valid: /^[0-9]{4}$/.test(value),\n        },\n      });\n    }\n  };\n\n  const handleFocus = () => {\n    postMessageToParent({\n      from: \"cvv\",\n      messageType: \"event\",\n      data: {\n        eventName: \"onfocus\",\n        value: true,\n      },\n    });\n  };\n\n  const handleBlur = () => {\n    postMessageToParent({\n      from: \"cvv\",\n      messageType: \"event\",\n      data: {\n        eventName: \"onblur\",\n        value: true,\n      },\n    });\n  };\n\n  useEffect(() => {\n    channel.current.onmessage = (event) => {\n      if (event.data && event.data.messageType === GET_PAYMENT_DATA) {\n        channel.current.postMessage({\n          action: SEND_PAYMENT_DATA,\n          name: \"cvv\",\n          value,\n        });\n      }\n    };\n  }, []);\n\n  return (\n    <input\n      type=\"text\"\n      placeholder=\"CVV\"\n      name=\"cvv\"\n      value={value}\n      onChange={handleChange}\n      onFocus={handleFocus}\n      onBlur={handleBlur}\n    />\n  );\n}\n","export default function postMessageToParent(message = {}) {\n  return (\n    typeof window !== \"undefined\" &&\n    window.parent.postMessage(\n      JSON.stringify(message),\n      new URLSearchParams(location.search).get(\"origin\")\n    )\n  );\n}\n"],"names":["START_PAYMENT","GET_PAYMENT_DATA","SEND_PAYMENT_DATA","PAYMENT_STATUS","CVV","useState","value","setValue","channel","useRef","BroadcastChannel","useEffect","current","onmessage","event","data","messageType","postMessage","action","name","type","placeholder","onChange","change","target","test","postMessageToParent","from","valid","onFocus","eventName","onBlur","message","window","parent","JSON","stringify","URLSearchParams","location","search","get"],"sourceRoot":""}